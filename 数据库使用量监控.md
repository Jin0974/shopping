# 数据库使用量监控指南

## 📊 监控数据库使用量

### 在Render控制台查看：
1. 进入PostgreSQL数据库页面
2. 查看"Metrics"选项卡
3. 监控存储使用情况

### 查询数据库大小：
```sql
SELECT 
    schemaname,
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) as size
FROM pg_tables 
WHERE schemaname = 'public'
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;
```

### 数据清理策略：
```sql
-- 删除1年前的订单
DELETE FROM orders WHERE created_at < NOW() - INTERVAL '1 year';

-- 查看表占用空间
SELECT pg_size_pretty(pg_database_size('your_database_name'));
```

## 🔄 数据生命周期管理

### 自动清理脚本：
- 每月自动删除超过1年的订单
- 保留统计数据，删除详细记录
- 定期备份重要数据

### 数据归档：
- 导出历史数据到Excel/CSV
- 压缩存储到云盘
- 保持数据库轻量化

## 📈 升级时机

### 何时考虑付费：
1. **存储使用超过80%**（800MB）
2. **业务快速增长**
3. **需要更长备份保留期**
4. **需要专业技术支持**

### 付费版本价值：
- $7/月 = 每天约¥1.6
- 相比其他数据库服务非常便宜
- 企业级可靠性和支持
