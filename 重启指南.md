# 内购系统重启指南 - 问题修复版

## 🚨 最新修复
已修复商品列表不显示的问题：
- ✅ 修复session state初始化顺序
- ✅ 添加调试信息
- ✅ 优化筛选逻辑

## 快速启动

### 方法1: 调试启动（推荐）
双击运行 `debug_start.bat` - 包含完整诊断信息

### 方法2: 使用批处理文件
双击运行以下任一文件：
- `restart_app.bat` - 重启脚本
- `start.bat` - 原始启动脚本

### 方法3: 命令行启动
1. 打开命令提示符或PowerShell
2. 切换到项目目录：
   ```
   cd "c:\Users\huishi00\Desktop\内购系统"
   ```
3. 运行应用：
   ```
   streamlit run app.py
   ```

### 方法4: Python模块方式
```
python -m streamlit run app.py
```

## 诊断工具
如果启动有问题，可以先运行：
1. **数据加载测试:** `python test_product_loading.py`
2. **商品显示测试:** `streamlit run test_product_display.py`
3. **完整诊断:** `python startup_diagnosis.py`

## 访问地址
启动成功后，通常在以下地址访问：
- http://localhost:8501
- 或者控制台显示的具体地址

## 预期看到的内容
启动后应该看到：
1. 🔍 调试信息: 加载了 X 件商品
2. 商品列表表头（条码、产品名称、库存、价格等）
3. 具体的商品信息

## 故障排除

### 如果还是看不到商品
1. 检查调试信息中显示的商品数量
2. 查看是否有筛选条件限制
3. 检查session state是否正常初始化

### 如果端口被占用
```
streamlit run app.py --server.port 8502
```

### 如果需要外部访问
```
streamlit run app.py --server.address 0.0.0.0
```

### 完整命令（所有选项）
```
streamlit run app.py --server.headless true --server.address 0.0.0.0 --server.port 8501
```

## 系统状态
- ✅ 应用程序已优化，移除了复杂逻辑
- ✅ 数据文件完整（inventory.json, orders.json, users.json）
- ✅ 无语法错误
- ✅ 支持普通用户和管理员角色

## 功能确认
启动后请验证：
1. 普通用户能看到商品列表
2. 购物车功能正常
3. 管理员功能正常
4. 订单查看正常

如有问题，请检查控制台输出的错误信息。
