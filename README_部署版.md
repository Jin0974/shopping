# 🛒 内购系统

一个基于Streamlit构建的企业内部商品购买管理系统。

## ✨ 功能特色

### 👨‍💼 管理员功能
- 📦 **库存管理**：商品增删改查、批量导入(Excel/CSV)、库存统计
- 📋 **订单管理**：订单查看、详细统计、数据导出
- 👥 **用户管理**：用户增删、权限管理
- 📊 **数据统计**：销售分析、支付统计、可视化图表

### 🛍️ 用户功能
- 🛒 **商品购买**：表格式商品浏览、购物车管理
- 💰 **灵活支付**：现金/内购券/混合支付，支持超额支付
- 📱 **订单管理**：订单历史、在线修改、订单撤销
- 🔍 **条码查询**：支持自定义条码字段管理

### 🎯 系统特点
- 🚀 **即用即部署**：支持Streamlit Cloud一键部署
- 🔐 **简单登录**：仅需姓名，自动注册
- 📈 **实时库存**：防超卖机制，库存实时更新
- 💾 **数据安全**：JSON文件存储，支持批量导出
- 🎨 **友好界面**：现代化UI，响应式设计

## 🚀 快速开始

### 本地运行
```bash
# 克隆仓库
git clone <your-repo-url>
cd 内购系统

# 安装依赖
pip install -r requirements.txt

# 运行应用
streamlit run app.py
```

### 在线部署
详见 [部署指南.md](部署指南.md)

## 👤 登录说明

- **管理员**：输入"管理员"
- **普通用户**：输入任意姓名（自动注册）

## 📋 商品导入

支持Excel(.xlsx)和CSV格式，表头可以是：
- 条码/code/barcode
- 商品名称/name
- 价格/price
- 库存/stock  
- 描述/description

## 💰 支付规则

- ✅ 支持现金、内购券、混合支付
- ✅ 允许超额支付（不找零）
- ❌ 不允许支付不足

## 🔧 技术栈

- **前端框架**：Streamlit
- **数据处理**：Pandas
- **文件存储**：JSON
- **Excel支持**：openpyxl

## 📂 项目结构

```
内购系统/
├── app.py                 # 主应用文件
├── requirements.txt       # Python依赖
├── .streamlit/           # Streamlit配置
│   ├── config.toml       # 应用配置
│   └── secrets.toml      # 敏感信息配置
├── README.md             # 项目说明
├── 部署指南.md           # 部署文档
├── 商品导入模板.csv      # 导入模板
└── 测试导入.csv         # 测试数据
```

## 📸 功能截图

### 管理员界面
- 库存管理：支持批量导入、表格显示、实时统计
- 订单管理：详细订单信息、支付统计、数据导出
- 数据统计：可视化图表、销售分析

### 用户界面  
- 商品购买：表格形式、条码显示、库存状态
- 购物车：实时计算、支付配置、库存验证
- 订单历史：历史查询、在线修改、订单撤销

## 🔧 部署配置

### Streamlit Cloud部署
1. 将代码推送到GitHub
2. 访问 https://share.streamlit.io/
3. 连接GitHub仓库
4. 一键部署

### 本地部署
```bash
streamlit run app.py --server.port 8501
```

## 📄 开源协议

MIT License - 详见 LICENSE 文件

## 🤝 贡献

欢迎提交Issue和Pull Request！

## 📞 技术支持

如有问题，请创建GitHub Issue或联系开发者。
