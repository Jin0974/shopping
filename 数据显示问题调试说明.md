# 数据显示问题调试说明

## 问题描述
用户报告库存管理页面显示统计数据（商品总数、总库存等），但下面的商品列表表格没有显示内容。

## 可能的原因
1. **错误隐藏机制过于强力**：我们的终极错误隐藏JavaScript代码可能把正常的数据表格也隐藏了
2. **数据格式化问题**：在处理时间格式或价格格式时出现异常
3. **DataFrame处理异常**：pandas DataFrame处理过程中的错误

## 调试方案

### 1. 已添加调试模式
在`app.py`中添加了JavaScript调试模式开关：
```javascript
window.DEBUG_MODE = true; // 设置为true以查看详细错误
```

### 2. 数据处理安全化
- 添加了try-catch包装所有格式化操作
- 增加了详细的错误信息显示
- 添加了数据检查和验证

### 3. 创建了调试文件
- `debug_app.py` - 完全禁用错误隐藏的调试版本
- `debug_inventory.py` - 简化的库存显示测试
- `test_data_loading.py` - 数据加载测试

## 启动调试版本
1. 使用 `start_debug.bat` 启动调试版本
2. 或者运行：`streamlit run app.py --server.port 8502`
3. 查看浏览器控制台（F12）的错误信息

## 问题解决步骤
1. 首先启动调试版本，查看控制台是否有错误
2. 检查数据是否正常加载
3. 确认是否是错误隐藏机制影响了正常显示
4. 根据实际错误信息进行修复

## 如何关闭调试模式
在`app.py`中找到：
```javascript
window.DEBUG_MODE = true;
```
改为：
```javascript
window.DEBUG_MODE = false;
```

## 数据文件检查
确认以下文件存在且格式正确：
- `inventory.json` - 库存数据
- `orders.json` - 订单数据
- `users.json` - 用户数据

## 下一步
如果问题依然存在，请：
1. 查看浏览器控制台错误信息
2. 检查Streamlit终端输出
3. 尝试运行`debug_app.py`进行对比测试
