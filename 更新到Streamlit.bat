@echo off
chcp 65001
echo ================================
echo    å†…è´­ç³»ç»Ÿ Streamlit è‡ªåŠ¨æ›´æ–°
echo ================================
echo.

echo æ­£åœ¨æ£€æŸ¥å½“å‰ç›®å½•...
cd /d "c:\Users\huishi00\Desktop\å†…è´­ç³»ç»Ÿ"
if not exist "app.py" (
    echo é”™è¯¯ï¼šæœªæ‰¾åˆ° app.py æ–‡ä»¶ï¼Œè¯·ç¡®è®¤å½“å‰ç›®å½•æ­£ç¡®
    pause
    exit /b 1
)

echo å½“å‰ç›®å½•ï¼š%cd%
echo.

echo æ­£åœ¨æ£€æŸ¥ Git çŠ¶æ€...
git status
if %errorlevel% neq 0 (
    echo é”™è¯¯ï¼šGit æœªåˆå§‹åŒ–æˆ–æœªå®‰è£…
    echo è¯·å…ˆå®‰è£… Git æˆ–ä½¿ç”¨ GitHub ç½‘é¡µç•Œé¢ä¸Šä¼ æ–‡ä»¶
    pause
    exit /b 1
)

echo.
echo æ­£åœ¨æ·»åŠ ä¿®æ”¹çš„æ–‡ä»¶...
git add app.py
git add "è´­ç‰©è½¦æ•°é‡ä¿®æ”¹åŠŸèƒ½è¯´æ˜Ž.md"
git add "è®¢å•åŽŸä»·ä¿®å¤è¯´æ˜Ž.md"
git add "Streamlitæ›´æ–°éƒ¨ç½²æŒ‡å—.md"
git add "*.md"

echo.
echo æ­£åœ¨æäº¤æ›´æ”¹...
git commit -m "åŠŸèƒ½æ›´æ–°ï¼šè´­ç‰©è½¦æ•°é‡ä¿®æ”¹å’Œè®¢å•åŽŸä»·ä¿®å¤

- æ·»åŠ è´­ç‰©è½¦æ•°é‡ä¿®æ”¹åŠŸèƒ½ï¼Œç”¨æˆ·å¯ç›´æŽ¥è°ƒæ•´å•†å“æ•°é‡
- ä¿®å¤è®¢å•ä¿®æ”¹åŽåŽŸä»·ä¸æ›´æ–°çš„é—®é¢˜
- å®Œå–„é™è´­æ£€æŸ¥é€»è¾‘ï¼Œé˜²æ­¢åˆ†æ‰¹è´­ä¹°ç»•è¿‡é™è´­
- ä¼˜åŒ–ç”¨æˆ·ä½“éªŒå’Œæ•°æ®ä¸€è‡´æ€§"

if %errorlevel% neq 0 (
    echo æäº¤å¤±è´¥ï¼Œå¯èƒ½æ²¡æœ‰æ–‡ä»¶éœ€è¦æäº¤æˆ–å­˜åœ¨å†²çª
    echo è¯·æ£€æŸ¥æ–‡ä»¶çŠ¶æ€
    pause
    exit /b 1
)

echo.
echo æ­£åœ¨æŽ¨é€åˆ° GitHub...
git push origin main

if %errorlevel% equ 0 (
    echo.
    echo ================================
    echo      æ›´æ–°æˆåŠŸå®Œæˆï¼
    echo ================================
    echo.
    echo âœ… ä»£ç å·²æˆåŠŸæŽ¨é€åˆ° GitHub
    echo âœ… Streamlit Cloud å°†åœ¨ 2-5 åˆ†é’Ÿå†…è‡ªåŠ¨é‡æ–°éƒ¨ç½²
    echo âœ… æ–°åŠŸèƒ½åŒ…æ‹¬ï¼š
    echo    - è´­ç‰©è½¦æ•°é‡ä¿®æ”¹åŠŸèƒ½
    echo    - è®¢å•åŽŸä»·ä¿®å¤
    echo    - å®Œå–„çš„é™è´­æ£€æŸ¥
    echo.
    echo ðŸ’¡ è¯·ç­‰å¾…å‡ åˆ†é’ŸåŽè®¿é—®æ‚¨çš„ Streamlit åº”ç”¨æµ‹è¯•æ–°åŠŸèƒ½
    echo.
) else (
    echo.
    echo ================================
    echo      æŽ¨é€å¤±è´¥
    echo ================================
    echo.
    echo âŒ å¯èƒ½çš„åŽŸå› ï¼š
    echo    1. ç½‘ç»œè¿žæŽ¥é—®é¢˜
    echo    2. GitHub è®¤è¯é—®é¢˜
    echo    3. è¿œç¨‹ä»“åº“å†²çª
    echo.
    echo ðŸ’¡ è§£å†³æ–¹æ¡ˆï¼š
    echo    1. æ£€æŸ¥ç½‘ç»œè¿žæŽ¥
    echo    2. å…ˆæ‰§è¡Œï¼šgit pull origin main
    echo    3. ç„¶åŽå†æ¬¡è¿è¡Œæ­¤è„šæœ¬
    echo    4. æˆ–ä½¿ç”¨ GitHub ç½‘é¡µç•Œé¢æ‰‹åŠ¨ä¸Šä¼  app.py
    echo.
)

echo æŒ‰ä»»æ„é”®é€€å‡º...
pause >nul
